<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>hsm.utils documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Hsm 0.1.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>hsm</span></div></div></li><li class="depth-2 branch"><a href="hsm.actions.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>actions</span></div></a></li><li class="depth-2 branch"><a href="hsm.conf.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>conf</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>controllers</span></div></div></li><li class="depth-3 branch"><a href="hsm.controllers.discussion.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>discussion</span></div></a></li><li class="depth-3 branch"><a href="hsm.controllers.post.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>post</span></div></a></li><li class="depth-3"><a href="hsm.controllers.user.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>user</span></div></a></li><li class="depth-2 branch"><a href="hsm.data.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>data</span></div></a></li><li class="depth-2 branch"><a href="hsm.dev.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dev</span></div></a></li><li class="depth-2 branch"><a href="hsm.github.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>github</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>integration</span></div></div></li><li class="depth-3 branch"><a href="hsm.integration.ghub.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ghub</span></div></a></li><li class="depth-3"><a href="hsm.integration.twttr.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>twttr</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>pipe</span></div></div></li><li class="depth-3 branch"><a href="hsm.pipe.event.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>event</span></div></a></li><li class="depth-3"><a href="hsm.pipe.main.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>main</span></div></a></li><li class="depth-2 branch"><a href="hsm.schema.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>schema</span></div></a></li><li class="depth-2 branch"><a href="hsm.server.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>server</span></div></a></li><li class="depth-2"><a href="hsm.system.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>system</span></div></a></li><li class="depth-3 branch"><a href="hsm.system.cassandra.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cassandra</span></div></a></li><li class="depth-3"><a href="hsm.system.kafka.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kafka</span></div></a></li><li class="depth-2 branch"><a href="hsm.users.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>users</span></div></a></li><li class="depth-2 current"><a href="hsm.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="hsm.utils.html#var-body-as-string"><div class="inner"><span>body-as-string</span></div></a></li><li class="depth-1"><a href="hsm.utils.html#var-body-of"><div class="inner"><span>body-of</span></div></a></li><li class="depth-1"><a href="hsm.utils.html#var-byte-array-.3Estr"><div class="inner"><span>byte-array-&gt;str</span></div></a></li><li class="depth-1"><a href="hsm.utils.html#var-epoch"><div class="inner"><span>epoch</span></div></a></li><li class="depth-1"><a href="hsm.utils.html#var-host-of"><div class="inner"><span>host-of</span></div></a></li><li class="depth-1"><a href="hsm.utils.html#var-id-generate"><div class="inner"><span>id-generate</span></div></a></li><li class="depth-1"><a href="hsm.utils.html#var-id-of"><div class="inner"><span>id-of</span></div></a></li><li class="depth-1"><a href="hsm.utils.html#var-idseq"><div class="inner"><span>idseq</span></div></a></li><li class="depth-1"><a href="hsm.utils.html#var-json-resp"><div class="inner"><span>json-resp</span></div></a></li><li class="depth-1"><a href="hsm.utils.html#var-mapkeyw"><div class="inner"><span>mapkeyw</span></div></a></li><li class="depth-1"><a href="hsm.utils.html#var-now-.3Eep"><div class="inner"><span>now-&gt;ep</span></div></a></li><li class="depth-1"><a href="hsm.utils.html#var-select-values"><div class="inner"><span>select-values</span></div></a></li><li class="depth-1"><a href="hsm.utils.html#var-start"><div class="inner"><span>start</span></div></a></li><li class="depth-1"><a href="hsm.utils.html#var-whois"><div class="inner"><span>whois</span></div></a></li><li class="depth-1"><a href="hsm.utils.html#var-zero"><div class="inner"><span>zero</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">hsm.utils</h2><div class="doc"><div class="markdown"><p>Utility functions. TODO: - Separate HTTP related helpers into separate namespace - Write proper extensive tests which would make it easier to understand and would be pretty much self documenting.</p></div></div><div class="public anchor" id="var-body-as-string"><h3>body-as-string</h3><div class="usage"><code>(body-as-string ctx)</code></div><div class="doc"><div class="markdown"><p>In a given request context (or hash-map contains the body key), returns the body if string, else tries to read input string using Java.io and slurp</p></div></div><div class="src-link"><a href="http://github.com/bcambel/hackersome/blob/development/src/clj/hsm/utils.clj#L41">view source</a></div></div><div class="public anchor" id="var-body-of"><h3>body-of</h3><div class="usage"><code>(body-of request)</code></div><div class="doc"><div class="markdown"><p>Reads the JSON body of the request</p></div></div><div class="src-link"><a href="http://github.com/bcambel/hackersome/blob/development/src/clj/hsm/utils.clj#L96">view source</a></div></div><div class="public anchor" id="var-byte-array-.3Estr"><h3>byte-array-&gt;str</h3><div class="usage"><code>(byte-array-&gt;str bytes)</code></div><div class="doc"><div class="markdown"><p>Convert byte array into String</p></div></div><div class="src-link"><a href="http://github.com/bcambel/hackersome/blob/development/src/clj/hsm/utils.clj#L108">view source</a></div></div><div class="public anchor" id="var-epoch"><h3>epoch</h3><div class="usage"><code>(epoch d)</code><code>(epoch d format)</code></div><div class="doc"><div class="markdown"><p>Returns the millisecond representation the given datetime as epoch</p></div></div><div class="src-link"><a href="http://github.com/bcambel/hackersome/blob/development/src/clj/hsm/utils.clj#L26">view source</a></div></div><div class="public anchor" id="var-host-of"><h3>host-of</h3><div class="usage"><code>(host-of request)</code></div><div class="doc"><div class="markdown"><p>Finds the host header of the request</p></div></div><div class="src-link"><a href="http://github.com/bcambel/hackersome/blob/development/src/clj/hsm/utils.clj#L83">view source</a></div></div><div class="public anchor" id="var-id-generate"><h3>id-generate</h3><div class="usage"><code>(id-generate &amp; args)</code></div><div class="doc"><div class="markdown"><p>Generate a new ID. Very raw right now. TODO: Replace with a proper ID generator. Like Twitter Snowflake or simirlar</p></div></div><div class="src-link"><a href="http://github.com/bcambel/hackersome/blob/development/src/clj/hsm/utils.clj#L62">view source</a></div></div><div class="public anchor" id="var-id-of"><h3>id-of</h3><div class="usage"><code>(id-of request)</code></div><div class="doc"><div class="markdown"><p>Finds the ID of the request. E.g - /link/:id - /post/:id - /user/:id</p></div></div><div class="src-link"><a href="http://github.com/bcambel/hackersome/blob/development/src/clj/hsm/utils.clj#L88">view source</a></div></div><div class="public anchor" id="var-idseq"><h3>idseq</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/bcambel/hackersome/blob/development/src/clj/hsm/utils.clj#L59">view source</a></div></div><div class="public anchor" id="var-json-resp"><h3>json-resp</h3><div class="usage"><code>(json-resp data)</code></div><div class="doc"><div class="markdown"><p>Generates JSON resp of given object, constructs a RING 200 Response. TODO: Optionable status code..</p></div></div><div class="src-link"><a href="http://github.com/bcambel/hackersome/blob/development/src/clj/hsm/utils.clj#L73">view source</a></div></div><div class="public anchor" id="var-mapkeyw"><h3>mapkeyw</h3><div class="usage"><code>(mapkeyw data)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/bcambel/hackersome/blob/development/src/clj/hsm/utils.clj#L51">view source</a></div></div><div class="public anchor" id="var-now-.3Eep"><h3>now-&gt;ep</h3><div class="usage"><code>(now-&gt;ep)</code></div><div class="doc"><div class="markdown"><p>Returns the microsecond representation of epoch of now.</p></div></div><div class="src-link"><a href="http://github.com/bcambel/hackersome/blob/development/src/clj/hsm/utils.clj#L36">view source</a></div></div><div class="public anchor" id="var-select-values"><h3>select-values</h3><div class="usage"><code>(select-values m ks)</code></div><div class="doc"><div class="markdown"><p>clojure.core contains select-keys but not select-values.</p></div></div><div class="src-link"><a href="http://github.com/bcambel/hackersome/blob/development/src/clj/hsm/utils.clj#L17">view source</a></div></div><div class="public anchor" id="var-start"><h3>start</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/bcambel/hackersome/blob/development/src/clj/hsm/utils.clj#L60">view source</a></div></div><div class="public anchor" id="var-whois"><h3>whois</h3><div class="usage"><code>(whois request)</code></div><div class="doc"><div class="markdown"><p>Temporary user finder.. Returns a static User ID</p></div></div><div class="src-link"><a href="http://github.com/bcambel/hackersome/blob/development/src/clj/hsm/utils.clj#L102">view source</a></div></div><div class="public anchor" id="var-zero"><h3>zero</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/bcambel/hackersome/blob/development/src/clj/hsm/utils.clj#L58">view source</a></div></div></div></body></html>